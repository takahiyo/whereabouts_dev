# ユーザーマニュアル改訂履歴

## 改訂日時
2024年12月16日

## 改訂の目的
画面からはヒントが無い隠れ機能について、ユーザーが発見・利用できるようにマニュアルに追記しました。

---

## 主な変更点

### 1. 新規セクション追加：「連絡先の確認方法」

#### 追加内容
氏名欄を長押し（約0.9秒）することで、登録されている連絡先情報（携帯番号・Email）を確認できる機能について詳細に説明しました。

#### 追加理由
- 画面上に操作のヒントがなく、ユーザーが機能に気づきにくい
- 実装コード（`board.js` の `attachContactLongPress` 関数）で確認
- スマートフォン、タブレット、PC（マウス）それぞれの操作方法を明記

#### 主な記載内容
- **スマートフォン・タブレット**：氏名欄を約0.9秒間長押し
- **PC**：氏名欄を約0.9秒間マウスボタンを押したまま
- 連絡先ダイアログの表示内容（携帯番号・Email）
- タップで電話やメールアプリが起動する機能
- 長押し中の動作（スクロールや大きな動きでキャンセル）
- 未登録時の表示（「未登録」表示）
- 連絡先の登録方法（管理者への依頼）

---

### 2. イベント機能セクションへの追加：「イベントカレンダーの日付列の色変更機能」

#### 追加内容
イベントカレンダー（ガントチャート）の日付ヘッダーをクリックすることで、各日付列の背景色を自由に変更できる機能について詳細に説明しました。

#### 追加理由
- 画面上に操作のヒントがなく、ユーザーが機能に気づきにくい
- 実装コード（`vacations.js` の `handleColorCycle`, `createPalettePopup` 関数）で確認
- カラーパレットの選択肢や用途例を明記

#### 主な記載内容
- **PC**：日付ヘッダーをクリック
- **スマートフォン・タブレット**：日付ヘッダーをタップ
- カラーパレットの選択肢：
  - none（白背景）
  - saturday（青系）
  - sunday（赤系）
  - holiday（赤ピンク系）
  - amber（黄色系）
  - mint（緑系）
  - lavender（紫系）
  - slate（灰色系）
- 色変更機能の用途例：
  - 特別な日を強調
  - 期間のグループ化
  - 視覚的な区別
  - 印刷時の識別
- 注意事項：
  - 色変更は一時的（モーダルを閉じるとリセット）
  - 管理者設定とは無関係
  - イベント表示機能とは別機能

---

### 3. よくある質問（FAQ）の追加

#### 追加したFAQ
1. **Q18. 氏名を長押ししても連絡先が表示されない**
   - 長押し時間が足りない（約0.9秒必要）
   - 長押し中に動かしている（動きでキャンセルされる）
   - スクロール中や画面移動中（動作中はキャンセル）
   - 連絡先が未登録

2. **Q19. 自分の連絡先を登録してほしい**
   - 連絡先登録は管理者のみが可能
   - 管理者への依頼方法

3. **Q20. イベントカレンダーの日付の色を変更できますか？**
   - 日付ヘッダーをクリックで色変更可能
   - 一時的な変更（リセットされる）
   - 用途（目立たせる、グループ化）

---

## 目次の更新

### 変更前
```
1. ログイン
2. 画面の見方
3. お知らせ機能
4. 基本操作
5. イベント機能
6. 検索・絞り込み機能
7. 自動更新と競合
8. よくある質問
```

### 変更後
```
1. ログイン
2. 画面の見方
3. お知らせ機能
4. 基本操作
5. 連絡先の確認方法 ← 新規追加
6. イベント機能
7. 検索・絞り込み機能
8. 自動更新と競合
9. よくある質問
```

---

## その他の微調整

### セクション番号の調整
新規セクション追加に伴い、以降のセクション番号を繰り下げました：
- 「イベント機能」：5 → 6
- 「検索・絞り込み機能」：6 → 7
- 「自動更新と競合」：7 → 8
- 「よくある質問」：8 → 9

---

## コードベースでの確認内容

### 1. 氏名長押し機能の実装確認
**ファイル**: `js/board.js`

**関連関数**:
- `attachContactLongPress()` - 長押しイベントの設定
- `showContactPopup()` - 連絡先ダイアログの表示
- `resolveContactInfo()` - 連絡先情報の取得

**仕様確認**:
- 長押し時間: 900ms（0.9秒）
- 動作許容範囲: 10px以内の移動（それ以上動くとキャンセル）
- スクロール中は自動キャンセル
- 連絡先情報: `tr.dataset.mobile`、`tr.dataset.email` から取得
- ダイアログ: オーバーレイ表示、Escキーや外クリックで閉じる

### 2. 日付列の色変更機能の実装確認
**ファイル**: `js/vacations.js`

**関連関数**:
- `handleColorCycle()` - 日付ヘッダークリックの処理
- `createPalettePopup()` - カラーパレットの生成と表示
- `handlePaletteColorSelect()` - 色選択の処理
- `applyColumnColor()` - 列への色適用

**仕様確認**:
- カラーパレット: 8色（none, saturday, sunday, holiday, amber, mint, lavender, slate）
- トリガー: `.vac-day-header` クリック
- パレット位置: クリックした日付ヘッダーの下に表示
- 外クリックまたはスクロールで自動クローズ
- 色変更はガントチャート表示中のみ有効（一時的）

---

## 改訂による期待効果

1. **隠れ機能の可視化**: ユーザーが気づきにくい便利機能を明示し、利用促進
2. **連絡先確認の効率化**: メンバーへの連絡が必要な際に、すぐに連絡先を確認可能
3. **イベントカレンダーの視認性向上**: 日付列の色変更により、重要な日付や期間を目立たせて管理しやすく
4. **問い合わせ削減**: FAQ追加により、ユーザーの疑問を自己解決できる情報を提供
5. **ユーザー体験の向上**: 全体的な操作性の理解が深まり、システムの活用度が向上

---

## 今後の改善提案

### UI/UXの改善案
1. **氏名欄に長押しヒントを表示**: 
   - 氏名欄にマウスホバー時に「長押しで連絡先表示」とツールチップ表示
   - または、初回ログイン時にチュートリアル表示

2. **日付ヘッダーに色変更ヒントを表示**:
   - 日付ヘッダーにマウスホバー時に「クリックで色変更」とツールチップ表示
   - または、イベントモーダル上部にヒントテキストを常時表示

3. **マニュアルへの導線強化**:
   - 画面内に「？」アイコンを配置し、関連マニュアルセクションへのリンクを提供

---

## 改訂者所見

今回の改訂では、実装コードを精査し、画面上に明示的なヒントがない機能を特定してマニュアルに追記しました。特に以下の2機能は非常に便利ですが、ユーザーが気づきにくいため、詳細な操作手順と用途例を記載しました：

- **氏名長押し機能**: 緊急時や連絡が必要な際に迅速に連絡先を確認可能
- **日付列の色変更機能**: 視覚的に重要な日付を強調し、カレンダーの可読性を向上

これらの機能がマニュアルに記載されることで、ユーザーの利便性が大幅に向上することを期待します。
