# 在席確認表 ユーザーマニュアル

## 目次
1. [ログイン](#ログイン)
2. [画面の見方](#画面の見方)
3. [お知らせ機能](#お知らせ機能)
4. [基本操作](#基本操作)
5. [連絡先の確認方法](#連絡先の確認方法)
6. [イベント機能](#イベント機能)
7. [検索・絞り込み機能](#検索絞り込み機能)
8. [自動更新と競合](#自動更新と競合)
9. [よくある質問](#よくある質問)

---

## ログイン

### 初回ログイン手順
1. ブラウザで在席確認表のURLにアクセスします
2. ログイン画面が表示されます
3. **拠点**：ドロップダウンから所属する拠点を選択します
4. **パスワード**：パスワードを入力します（拠点ごとに異なります）
5. 「ログイン」ボタンをクリックします

### ログインに関する注意
- パスワードは拠点の管理者から取得してください
- ログイン状態は1時間保持されます（自動延長されます）
- ブラウザを閉じると、次回は再度ログインが必要になる場合があります

---

## 画面の見方

### ヘッダー部分
画面上部には以下の要素があります：

| 項目 | 説明 |
|------|------|
| **タイトルボタン** | 拠点名が表示されます。クリックするとグループジャンプメニューが開きます |
| **氏名検索** | 氏名で絞り込む検索ボックス |
| **ステータス絞り込み** | ステータス（在席、外出など）で絞り込むドロップダウン |
| **お知らせ** | お知らせがある場合に表示。クリックすると折りたたみ/展開を切り替えます |
| **管理** | 管理者のみ表示。管理パネルを開きます |
| **イベント** | イベントが登録されている場合に表示。クリックするとイベント選択画面が開きます |
| **ログオフ** | ログアウトします |
| **マニュアル** | このマニュアルを表示します |

### グループパネル
- 画面は**グループ（チーム）**ごとにパネルで区切られています
- 各パネルにはグループ名と人数が表示されます
- パネル内にはメンバーの在席情報が表で表示されます

### 表の列
各メンバーの行には以下の情報が表示されます：

| 列名 | 説明 | 入力方法 |
|------|------|----------|
| **氏名** | メンバーの名前（編集不可） | - |
| **内線** | 内線番号（編集不可） | - |
| **業務時間** | その日の勤務時間帯 | テキスト入力（例：09:00-17:30） |
| **ステータス** | 在席、外出、会議、テレワーク、休みなど | ドロップダウンで選択 |
| **戻り時間** | 外出や会議の場合の戻り予定時刻 | ドロップダウンで選択（07:00〜22:00） |
| **備考** | 直出、直帰などの補足情報 | テキスト入力または候補から選択 |

---

## お知らせ機能

### お知らせの表示
ログイン後、管理者が登録したお知らせがある場合、ヘッダーとメイン画面の間に**お知らせエリア**が表示されます。

### お知らせエリアの構成
- **📢 お知らせ**：お知らせエリアのタイトル
- **お知らせ項目**：各お知らせのタイトルと内容が表示されます
- **黄色の背景**：重要な情報であることを示すため、目立つデザインになっています

### お知らせの折りたたみ/展開

#### 初期状態
- ログイン直後は、お知らせエリアが**展開**された状態で表示されます
- すべてのお知らせのタイトルと内容を確認できます

#### 折りたたみ方法
1. ヘッダーの**「お知らせ」**ボタンをクリック
2. お知らせエリアが折りたたまれ、以下の形式でサマリー表示されます：
   ```
   最初のお知らせのタイトル (他●件)
   ```
   - 例：`システムメンテナンスのお知らせ (他2件)`
   - お知らせが1件のみの場合は「(他●件)」は表示されません

#### 展開方法
1. ヘッダーの**「お知らせ」**ボタンを再度クリック
2. お知らせエリアが展開され、すべての内容が表示されます

### お知らせの確認
- お知らせは拠点ごとに管理されています
- 管理者が登録・更新・削除を行います
- お知らせがない場合、お知らせエリアとボタンは表示されません

### お知らせの用途
お知らせには以下のような情報が掲載されます：
- システムメンテナンスの予定
- 拠点からの重要なお知らせ
- 業務連絡や注意事項
- 新機能の案内

---

## 基本操作

### 1. 業務時間の入力
**業務時間**欄には、その日の勤務時間帯を入力します。

- **入力形式**：`開始時刻-終了時刻`（例：`09:00-17:30`）
- **入力方法**：
  - 直接キーボードで入力
  - または、入力欄をクリックして候補リストから選択
- **候補リスト**：
  - `07:00-15:30`
  - `07:30-16:00`
  - `08:00-16:30`
  - `08:30-17:00`
  - `09:00-17:30`（デフォルト）
  - `09:30-18:00`
  - `10:00-18:30`
  - `10:30-19:00`
  - `11:00-19:30`
  - `11:30-20:00`
  - `12:00-20:30`
- **空白の場合**：プレースホルダーとして `09:00-17:30` が表示されます

### 2. ステータスの変更
**ステータス**欄で現在の状態を選択します。

#### 利用可能なステータス
1. **在席** - オフィスに在席中
2. **外出** - 外出中（戻り時間の入力が必要）
3. **在宅勤務** - テレワーク・在宅勤務
4. **出張** - 出張中（戻り時間の入力が必要）
5. **研修** - 研修参加中（戻り時間の入力が必要）
6. **健康診断** - 健康診断中（戻り時間の入力が必要）
7. **コアドック** - コアドック（戻り時間の入力が必要）
8. **帰宅** - 既に帰宅済み
9. **休み** - 休暇・休日

#### ステータスによる色分け
- **在席**：無色（白背景）
- **外出**：オレンジ色
- **会議**：青色
- **在宅勤務**：紫色
- **帰宅**：薄灰色
- **休み**：赤色
- **その他（出張、研修など）**：それぞれ異なる色で表示

#### 自動クリア機能
以下のステータスを選択すると、戻り時間と備考が自動的にクリアされます：
- 在席
- 在宅勤務
- 帰宅
- 休み

### 3. 戻り時間の入力
**外出、会議、出張、研修、健康診断、コアドック**を選択した場合は、戻り時間の入力が**必須**です。

- **選択範囲**：07:00〜22:00
- **刻み**：30分刻み（管理者が変更可能）
- **未入力の場合**：赤枠で表示され、「戻り時間を選択」というヒントが表示されます
- **不要なステータス**：在席、在宅勤務、帰宅、休みの場合は選択できません（グレーアウト）

### 4. 備考の入力
**備考**欄には自由に文字を入力できます。

- **候補リスト**：入力欄をクリックすると以下の候補が表示されます
  - 直出
  - 直帰
  - 直出・直帰
- **空白にする**：候補から「（空白）」を選択するか、内容を削除してください

---

## 連絡先の確認方法

### 氏名の長押しで連絡先を表示
メンバーの氏名欄を長押しすることで、登録されている連絡先を確認できます。

#### 操作方法

**スマートフォン・タブレットの場合：**
1. 確認したいメンバーの**氏名欄を約0.9秒間長押し**します
2. 連絡先ダイアログが表示されます
3. 以下の情報が表示されます：
   - **携帯番号**：登録されている場合はタップで電話をかけられます
   - **Email**：登録されている場合はタップでメールアプリが起動します
4. 閉じるには「×」ボタンをクリックするか、ダイアログ外をタップします

**PC（マウス操作）の場合：**
1. 確認したいメンバーの**氏名欄を約0.9秒間マウスボタンを押したまま**にします
2. 連絡先ダイアログが表示されます
3. 閉じるには「×」ボタンをクリックするか、`Esc`キーを押します

#### 注意事項
- 長押し中に指やマウスを大きく動かすと、キャンセルされます
- スクロール中や画面移動中は長押しがキャンセルされます
- 連絡先が未登録の場合は「未登録」と表示されます
- 連絡先情報は管理者のみが登録・編集できます

#### 連絡先の登録について
- 携帯番号やEmailの登録を希望する場合は、管理者に連絡してください
- 管理者は管理パネルの「メンバー管理」タブから登録できます

---

## イベント機能

### 概要
イベント機能を使用すると、GW、年末年始、夏季休暇など、複数日にわたる休暇を簡単に確認・表示できます。

### イベントボタンの表示
- 管理者がイベントを登録すると、ヘッダーに**「イベント」**ボタンが自動的に表示されます
- イベントが登録されていない場合、ボタンは表示されません

### イベントの表示手順

#### 1. イベントモーダルを開く
1. ヘッダーの**「イベント」**ボタンをクリック
2. イベント選択画面が表示されます

#### 2. イベントを選択する
1. 登録されているイベントの一覧から、表示したいものを選択します
   - 例：「GW期間休暇」「年末年始休暇」「夏季休暇」
2. 選択すると、ガントチャート（カレンダー形式の表）が表示されます
3. ガントチャートには以下が表示されます：
   - **横軸**：日付（期間内のすべての日）
   - **縦軸**：グループとメンバー
   - **セル**：各メンバーの各日の休暇状況（色付きセル＝休暇）
   - **土日・祝日**：自動的に色分け表示されます

#### 3. イベントを画面に表示する
1. **「表示」**ボタンをクリック
2. メイン画面に戻ると、以下のように表示されます：
   - 休暇中のメンバーの行が**ハイライト表示**されます
   - ステータス欄にイベントのタイトル（例：「GW期間休暇」）が表示されます
   - 画面上部に「イベント表示中」のバナーが表示されます

#### 4. イベント表示を解除する
- イベントモーダルを開き、**「表示クリア」**ボタンをクリックします
- または、別のイベントを選択すると、表示が切り替わります

### ガントチャートの見方

#### 表示内容
- **グループ名**：左端の列に表示されます
- **メンバー名**：グループごとにメンバーが一覧表示されます
- **日付ヘッダー**：上部に月と日付が表示されます
- **休暇セル**：色付きのセル＝そのメンバーがその日に休暇

#### 色分け
- **通常の日**：白背景
- **土曜日**：青系の背景
- **日曜日**：赤系の背景
- **祝日**：赤系の背景（自動判定）
- **休暇ON**：色付き（休暇が設定されている日）

#### グループジャンプ
- メンバーが多い場合、グループ選択ボックスで特定のグループに素早く移動できます

### イベントカレンダーの日付列の色変更機能

イベントカレンダー（ガントチャート）では、各日付列の背景色を自由に変更できます。これにより、特定の日付を目立たせたり、視覚的にグループ化したりすることができます。

#### 色変更の操作方法

**PC（マウス操作）の場合：**
1. イベントモーダルを開き、ガントチャートを表示します
2. 変更したい日付の**日付ヘッダー（上部の日付部分）をクリック**します
3. カラーパレットが表示されます
4. 以下の色から選択できます：
   - **none**：白背景（デフォルト）
   - **saturday**：青系（土曜日風）
   - **sunday**：赤系（日曜日風）
   - **holiday**：赤ピンク系（祝日風）
   - **amber**：黄色系
   - **mint**：緑系
   - **lavender**：紫系
   - **slate**：灰色系
5. 色を選択すると、その日付列全体の背景色が変更されます

**スマートフォン・タブレットの場合：**
1. 日付ヘッダーを**タップ**します
2. カラーパレットが表示されるので、色を選択します

#### 色変更機能の用途例
- **特別な日を強調**：会社の創立記念日やイベント日を目立たせる
- **期間のグループ化**：連休期間全体を同じ色でまとめる
- **視覚的な区別**：月をまたぐ期間を色分けして見やすくする
- **印刷時の識別**：印刷時にも色が反映されるため、紙での確認にも便利

#### 注意事項
- 色変更は一時的なもので、イベントモーダルを閉じるとリセットされます
- 管理者が設定した色は保存されません（画面表示用の補助機能です）
- 祝日判定は自動で行われますが、色を上書きすることも可能です
- 色変更はイベント表示には影響しません（表示機能は別機能です）

### 注意事項

#### 表示中の制限
- イベントを表示している間、該当メンバーのステータスは編集できません
- ステータス欄にはイベントのタイトルが表示され、内部的には「休み」として扱われます
- 編集が必要な場合は、一度イベント表示を解除してください

#### 自動解除について
- イベント期間が終了しても、自動的には解除されません
- 管理者が「表示」設定を解除するか、手動で「表示クリア」を実行してください

#### イベントの登録・編集
- イベントの登録・編集・削除は**管理者のみ**が行えます
- 新しいイベントを設定したい場合や、内容を変更したい場合は、管理者に問い合わせてください

### 用途例
イベント機能は以下のような場面で活用できます：

- **GW（ゴールデンウィーク）**：5月の連休期間の休暇管理
- **夏季休暇**：8月のお盆休み期間
- **年末年始休暇**：12月末〜1月初旬の休暇
- **会社全体休業日**：創立記念日などの一斉休暇
- **特定チームの一斉休暇**：部署単位での休暇計画

---

## 検索・絞り込み機能

### 氏名検索
ヘッダーの**氏名検索**ボックスに文字を入力すると、リアルタイムで該当するメンバーのみが表示されます。

- 部分一致で検索されます（例：「田中」で「田中太郎」がヒット）
- 該当者がいないグループパネルは自動的に非表示になります
- 検索を解除するには、検索ボックスを空にしてください

### ステータス絞り込み
ヘッダーの**ステータス絞り込み**ドロップダウンで、特定のステータスのメンバーのみを表示できます。

- 選択肢には各ステータスと人数が表示されます（例：`外出 (3人)`）
- 「全て」を選択すると、絞り込みが解除されます
- 該当者がいないグループパネルは自動的に非表示になります

### グループジャンプ
メンバーが多く画面が長い場合、タイトルをクリックして**グループジャンプメニュー**を開くと便利です。

1. タイトル（拠点名）をクリック
2. ジャンプメニューが表示されます
3. 「全体」または特定のグループ名をクリック
4. 選択した位置にスムーズにスクロールします

---

## 自動更新と競合

### 自動更新の仕組み
- 入力した内容は**約1秒後**に自動的にサーバーに保存されます
- 他の端末（PC、スマートフォンなど）で入力された**在席状況**は**約10秒ごと**に自動的に反映されます
- **お知らせや設定の変更**は**約30秒ごと**に自動的に反映されます

### 入力中の保護
- 備考や業務時間を**入力中**または**変換中**の場合、他端末からの更新は一時的に保留されます
- 入力を確定すると、サーバーに送信されます

### 競合が発生した場合
複数の端末で同時に同じ行を編集すると、競合が発生することがあります。

- **サーバーの値が優先**されます
- 画面右下に「他端末と競合しました（サーバ値で更新）」というメッセージが表示されます
- 再度入力し直してください

### オフライン時の動作
- インターネット接続が切れた場合、入力内容は一時的にブラウザに保存されます
- 接続が復旧すると、自動的にサーバーに送信されます
- 長時間オフラインだった場合、ログインが切れることがあります

---

## よくある質問

### Q1. 自分の名前が表示されません
**A**：管理者が名簿に登録していない可能性があります。管理者に連絡して名簿への追加を依頼してください。

### Q2. 入力した内容が反映されません
**A**：以下を確認してください：
- インターネット接続が正常か
- ログイン状態が有効か（1時間で自動更新されますが、ネットワーク不安定時は切れることがあります）
- 他の端末で同時に編集していないか
- 在席状況は約10秒ごと、お知らせは約30秒ごとに更新されます（すぐに確認するにはページを再読み込み）

### Q3. 戻り時間が選択できません
**A**：ステータスが「在席」「在宅勤務」「帰宅」「休み」の場合、戻り時間は選択できません（不要なため）。

### Q4. 業務時間の候補に希望の時間がありません
**A**：候補リスト以外の時間も直接入力できます（例：`08:15-17:00`）。候補リストの変更は管理者に依頼してください。

### Q5. スマートフォンで使えますか？
**A**：はい、スマートフォンのブラウザでも利用できます。画面幅が狭い場合、自動的にカード表示に切り替わります。

### Q6. 更新ボタンはありますか？
**A**：更新ボタンはありません。入力内容は自動的に約2秒後にサーバーに送信されます。

### Q7. ログアウトはいつすべきですか？
**A**：共用端末を使用している場合は、使用後に必ずログアウトしてください。個人端末の場合は、ブラウザを閉じるだけで問題ありません。

### Q8. パスワードを忘れました
**A**：拠点の管理者に連絡してパスワードを再確認してください。

### Q9. 画面が正しく表示されません
**A**：以下を試してください：
- ブラウザを最新版に更新する
- ブラウザのキャッシュをクリアする（Ctrl+Shift+R または Cmd+Shift+R）
- 別のブラウザ（Chrome、Edge、Safari、Firefoxなど）を試す

### Q10. 誤って入力した内容を元に戻せますか？
**A**：ブラウザの「元に戻す」機能（Ctrl+Z または Cmd+Z）が使えます。ただし、既にサーバーに送信された後は、手動で修正し直す必要があります。

### Q11. お知らせボタンが表示されません
**A**：お知らせがない場合、お知らせボタンとお知らせエリアは表示されません。管理者がお知らせを登録すると自動的に表示されます。

### Q12. お知らせが邪魔で画面が見づらい
**A**：ヘッダーの「お知らせ」ボタンをクリックすることで、お知らせエリアを折りたたむことができます。折りたたむと1行のサマリー表示になり、画面がすっきりします。

### Q13. お知らせの内容を変更したい
**A**：お知らせの追加・編集・削除は管理者のみが行えます。内容に誤りがある場合や更新が必要な場合は、拠点の管理者に連絡してください。

### Q14. イベントボタンが表示されません
**A**：イベントが登録されていない場合、イベントボタンは表示されません。GWや年末年始などのイベントを設定したい場合は、管理者に登録を依頼してください。

### Q15. イベントを表示したのにメンバーの行がハイライトされません
**A**：以下を確認してください：
- イベントモーダルで「表示」ボタンをクリックしたか
- 選択したイベントの期間に今日の日付が含まれているか
- 該当メンバーの今日の日付にチェックが入っているか
- ページを再読み込み（F5）して再度試してみてください

### Q16. イベント表示中にステータスを変更できません
**A**：イベントを表示している間、該当メンバーのステータスは編集できません。イベントモーダルを開き、「表示クリア」ボタンをクリックして解除してください。

### Q17. イベントを設定したい
**A**：イベントの登録・編集・削除は管理者のみが行えます。GWや年末年始、夏季休暇などを設定したい場合は、拠点の管理者に問い合わせてください。

### Q18. 氏名を長押ししても連絡先が表示されない
**A**：以下を確認してください：
- 約0.9秒間しっかり押し続けているか（短いと反応しません）
- 長押し中に指やマウスを動かしていないか（動かすとキャンセルされます）
- スクロール中や画面移動中でないか（動作中はキャンセルされます）
- 携帯番号やEmailが管理者によって登録されているか（未登録の場合は「未登録」と表示されます）

### Q19. 自分の連絡先を登録してほしい
**A**：連絡先の登録・編集は管理者のみが行えます。携帯番号やEmailの登録を希望する場合は、管理者に連絡してください。

### Q20. イベントカレンダーの日付の色を変更できますか？
**A**：はい、日付ヘッダーをクリックすることで、その日付列の背景色を変更できます。ただし、色変更は一時的なもので、イベントモーダルを閉じるとリセットされます。特定の日付を目立たせたり、視覚的にグループ化したりする際に便利です。

---

## お問い合わせ
システムに関する質問や不具合の報告は、拠点の管理者にご連絡ください。
